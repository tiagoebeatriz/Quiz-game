<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz Difícil</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(to right, #1f4037, #99f2c8);
      color: #333;
      padding: 20px;
      text-align: center;
    }
    .question {
      margin-bottom: 20px;
    }
    .answers button {
      display: block;
      margin: 10px auto;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #28a745;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    #score, #cash, #paypalRequest {
      margin-top: 20px;
      font-size: 18px;
    }
    #quiz, #final, #paypalRequest {
      display: none;
    }
  </style>
</head>
<body>
  <h1>Desafio do Conhecimento</h1>
  <div id="adsMessage">
    <p>Você precisa assistir ou clicar em 5 anúncios antes de jogar!</p>
    <button onclick="location.href='anuncios.html'">Ir para os anúncios</button>
  </div>

  <div id="quiz">
    <div id="questionBox" class="question"></div>
    <div id="answerButtons" class="answers"></div>
  </div>

  <div id="final">
    <h2>Parabéns! Você acertou as 5 perguntas!</h2>
    <p id="pointsEarned"></p>
    <button onclick="showMoreAds()">Assistir 2 anúncios para continuar</button>
  </div>

  <div id="score"></div>
  <div id="cash"></div>

  <div id="paypalRequest">
    <h3>Solicitar saque</h3>
    <p>Você atingiu 10.000 pontos! Preencha o formulário abaixo:</p>
    <input type="email" id="paypalEmail" placeholder="Seu e-mail do PayPal"><br><br>
    <button onclick="submitPayPal()">Solicitar pagamento</button>
    <p id="paymentInfo"></p>
  </div>

  <button onclick="shareSite()">Compartilhar com amigos</button>

  <script>
    const allQuestions = [
      { q: "Quem foi o primeiro matemático a usar o cálculo infinitesimal?", a: ["Newton", "Euler", "Leibniz", "Gauss"], c: 2 },
      // ... +49 perguntas difíceis aqui no mesmo formato
    ];

    let currentQuestion = 0;
    let score = 0;
    let roundPoints = 0;

    function startQuiz() {
      document.getElementById("adsMessage").style.display = "none";
      document.getElementById("quiz").style.display = "block";
      score = parseInt(localStorage.getItem("quizScore") || 0);
      showQuestion();
    }

    function showQuestion() {
      const questions = [...allQuestions].sort(() => 0.5 - Math.random()).slice(0, 5);
      currentQuestion = 0;
      roundPoints = 0;

      function loadQuestion(index) {
        const q = questions[index];
        document.getElementById("questionBox").innerText = q.q;
        const answers = document.getElementById("answerButtons");
        answers.innerHTML = "";
        q.a.forEach((alt, i) => {
          const btn = document.createElement("button");
          btn.innerText = alt;
          btn.onclick = () => {
            if (i === q.c) {
              currentQuestion++;
              if (currentQuestion < 5) loadQuestion(currentQuestion);
              else {
                roundPoints = 1;
                score += roundPoints;
                localStorage.setItem("quizScore", score);
                document.getElementById("quiz").style.display = "none";
                document.getElementById("final").style.display = "block";
                document.getElementById("pointsEarned").innerText = `Você ganhou ${roundPoints} ponto.`;
                updateScore();
              }
            } else {
              alert("Errou! Você precisa assistir novamente os anúncios.");
              location.href = "anuncios.html";
            }
          };
          answers.appendChild(btn);
        });
      }
      loadQuestion(currentQuestion);
    }

    function showMoreAds() {
      location.href = "anuncios.html";
    }

    function updateScore() {
      document.getElementById("score").innerText = `Saldo de pontos: ${score}`;
      document.getElementById("cash").innerText = `Equivalente em dólar: US$ ${(score * 0.001).toFixed(3)}`;
      if (score >= 10000) {
        document.getElementById("paypalRequest").style.display = "block";
      }
    }

    function submitPayPal() {
      const email = document.getElementById("paypalEmail").value;
      const amount = (score * 0.001).toFixed(2);
      document.getElementById("paymentInfo").innerText = `Enviar US$ ${amount} para ${email}`;
      alert("Solicitação enviada. O desenvolvedor enviará manualmente o pagamento.");
    }

    function shareSite() {
      const shareUrl = window.location.href;
      navigator.clipboard.writeText(shareUrl).then(() => {
        alert("Link copiado! Compartilhe com seus amigos.");
      });
    }

    // Executar após retorno da página de anúncios
    if (window.location.href.includes("quiz.html")) {
      startQuiz();
    }
  </script>
</body>
</html>
